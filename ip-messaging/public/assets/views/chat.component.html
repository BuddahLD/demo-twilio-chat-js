<div id="chat-wrapper" [ngClass]="{'show-menu': menuVisible}">
    <div id="chat-viewport">
        <div id="chat-menu" class="ui left inverted vertical menu">
            <div class="menu-header item">
                <a class="ui logo icon image" href="/">
                    <img src="/assets/img/twilio-shield.png" width="35" alt="Virgil + Twilio">
                </a>
                <hgroup>
                    <h1>Virgil + Twilio</h1>
                    <h2>IP Messaging</h2>
                </hgroup>
                <button id="logout-btn" class="ui icon black button" (click)="logout()">
                    <i class="icon sign out"></i>
                </button>
            </div>
            <div class="channels item">
                <div class="header">Channels</div>
                <!--<div class="ui fluid icon input">
                    <input type="text" placeholder="New channel..." [(ngModel)]="newChannelName" maxlength="25" >
                    <i class="add link icon" [class.disabled]="!newChannelName" (click)="createChannel()"></i>
                </div>
                <div class="channel-input ui fluid action input" [class.disabled]="isChannelCreating" >
                    <input type="text" placeholder="Channel name" [(ngModel)]="newChannelName" maxlength="25" >
                    <button class="ui icon button" [class.loading]="isChannelCreating" [class.disabled]="!newChannelName" (click)="createChannel()" >
                        <i class="plus icon"></i>
                    </button>
                    <div class="ui icon input">
                        <input type="text" placeholder="Channel name" [(ngModel)]="newChannelName" maxlength="25" >
                        <i class="circular search link icon"  [class.loading]="isChannelCreating" [class.disabled]="!newChannelName" (click)="createChannel()"  ></i>
                    </div>
                </div>-->
                <!--<div class="busy-indicator" *ngIf="isBusy">
                    <div class="ui active small inline loader"></div>&nbsp;&nbsp;
                    Loading...
                </div>-->
                <div class="channel-list menu" [class.disabled]="isBusy">
                    <a class="item" *ngFor="let channel of channels" (click)="setCurrentChannel(channel)" [class.active]="channel == currentChannel" ># {{channel.friendlyName}}</a>
                </div>
            </div>
        </div>
        <div id="chat-content">
            <button id="chat-menu-toggle" class="ui basic button" (click)="menuVisible = !menuVisible">
                <i class="sidebar icon"></i>
                Menu
            </button>
            <seciton class="chat ui blurring">
                <header>
                    <h1 class="header">
                        #{{currentChannel?.friendlyName}}
                        <span class="ui label">
                            <i class="users icon"></i> {{channelMembers.length}}

                            <span class="detail">Members</span>
                        </span>
                                              <button class="ui red mini button" [class.hidden]="account.current.identity != currentChannel?.createdBy" [class.disabled]="!currentChannel" (click)="deleteChannel()" >Red</button>
 
                    </h1>
                </header>
                <div class="ui divider"></div>
                <main>
                    <div class="feed-wrapper">
                            <div class="ui feed">
                                <div class="event" *ngFor="let message of messages" [class.outgoing]="message.author == account.current.identity" >
                                    <div class="content">
                                        <div class="summary">
                                            <div class="user">
                                                {{message.author}}
                                            </div>
                                            <div class="date">
                                                {{message.date | ipmFromNow }}
                                            </div>
                                        </div>
                                        <div class="extra text">
                                            <div class="ui message">
                                                {{message.body}}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    </div>
                </main>
                <div class="ui divider"></div>
                <footer>
                    <div class="ui fluid action input" [class.disabled]="currentChannel == null" >
                        <input type="text" placeholder="Type a message here" [(ngModel)]="newMessage" (keydown.enter)="postMessage()" >
                        <div class="ui button" [class.disabled]="!newMessage" (click)="postMessage()" >Send</div>
                    </div>
                </footer>
                <div id="placeholder" class="ui dimmer inverted active" *ngIf="currentChannel == null">
                    <div class="content">
                        <div class="center">
                            <h2 class="text">Select a channel from menu to start</h2>
                        </div>
                    </div>
                </div>
            </seciton>
            <div id="menu-dimmer" class="ui inverted dimmer" [ngClass]="{active: menuVisible}" (click)="menuVisible = false"></div>
        </div>
    </div>
</div>
