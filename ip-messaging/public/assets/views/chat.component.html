<div id="chat-wrapper" [ngClass]="{'show-menu': menuVisible}">
    <div id="chat-viewport">
        <div id="chat-menu" class="ui left inverted vertical menu">
            <div class="menu-header item">
                <a class="ui logo icon image" href="/">
                    <img src="/assets/img/twilio-shield.png" width="35" alt="Virgil + Twilio">
                </a>
                <hgroup>
                    <h1>Virgil + Twilio</h1>
                    <h2>IP Messaging</h2>
                </hgroup>
                <button id="logout-btn" class="ui icon black button" (click)="logout()">
                    <i class="icon sign out"></i>
                </button>
            </div>
            <div class="item">
                <div class="header">Channels</div>
                <div class="channel-input ui fluid action input" [class.disabled]="isChannelCreating" >
                    <input type="text" placeholder="Channel name" [(ngModel)]="newChannelName" >
                    <button class="ui icon button" [class.loading]="isChannelCreating" [class.disabled]="!newChannelName" (click)="createChannel()" >
                        <i class="plus icon"></i>
                    </button>
                </div>
                <div class="ui" *ngIf="isBusy">
                    <div class="ui active small inline loader"></div>&nbsp;&nbsp;
                    Loading...
                </div>
                <div class="menu" *ngFor="let channel of channels" >
                    <a class="item" (click)="setCurrentChannel(channel)" [class.active]="channel == currentChannel" >{{channel.friendlyName}}</a>                    
                </div>
                <div class="ui divider"></div>
            </div>
        </div>
        <div id="chat-content">
            <seciton class="chat">
                <header>
                    <button id="chat-menu-toggle" class="ui basic button" (click)="menuVisible = !menuVisible">
                        <i class="sidebar icon"></i>
                        Menu
                    </button>
                    <h1 class="header">#{{currentChannel?.friendlyName}} <small>{{channelMembers.length}} members</small></h1>
                </header>
                <div class="ui divider"></div>
                <main>
                    <div class="feed-wrapper">
                            <div class="ui feed">
                                <div class="event" *ngFor="let message of messages">
                                    <div class="content">
                                        <div class="summary">
                                            <div class="user">
                                                {{message.author}}
                                            </div>
                                            <div class="date">
                                                {{message.dateUpdated | ipmFromNow }}
                                            </div>
                                        </div>
                                        <div class="extra text">
                                            <div class="ui message">
                                                {{message.body}}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    </div>
                </main>
                <div class="ui divider"></div>
                <footer>
                    <div class="ui fluid action input">
                        <input type="text" placeholder="Type a message here">
                        <div class="ui button">Send</div>
                    </div>
                </footer>
            </seciton>
            <div class="ui inverted dimmer" [ngClass]="{active: menuVisible}" (click)="menuVisible = false"></div>
        </div>
    </div>
</div>
